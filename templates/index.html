<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản trị hệ thống phim</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../static/css/index.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2><i class="fas fa-film"></i> Quản trị phim</h2>
        </div>
        <div class="sidebar-menu">
            <ul>
                <li><a href="#" class="active"><i class="fas fa-home"></i> <span>Tổng quan</span></a></li>
                <li><a href="#"><i class="fas fa-video"></i> <span>Quản lý phim</span></a></li>
                <li><a href="#"><i class="fas fa-theater-masks"></i> <span>Diễn viên</span></a></li>
                <li><a href="#"><i class="fas fa-list"></i> <span>Thể loại</span></a></li>
                <li><a href="#"><i class="fas fa-star"></i> <span>Đánh giá</span></a></li>
                <li><a href="#"><i class="fas fa-play-circle"></i> <span>Tập phim</span></a></li>
                <li><a href="#"><i class="fas fa-users"></i> <span>Người dùng</span></a></li>
            </ul>
        </div>
        <div class="sidebar-footer">
            <p>Phiên bản 2.0.1</p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <h1><i class="fas fa-chart-line"></i> Tổng quan hệ thống</h1>
            </div>
            <div class="header-right">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Tìm kiếm...">
                </div>
                <div class="notification">
                    <i class="fas fa-bell"></i>
                    <div class="notification-badge">5</div>
                </div>
                <div class="user-profile">
                    <div class="user-avatar">AD</div>
                    <div class="user-info">
                        <div class="user-name">Quản trị viên</div>
                        <div class="user-role">Super Admin</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content -->
        <div class="content">
            <!-- Dashboard Cards -->
            <div class="table-header">
                <h2>Thống kê tổng quát</h2>
                <div class="chart-actions">
                    <select id="timeFilter">
                        <option value="7days">7 ngày qua</option>
                        <option value="30days">30 ngày qua</option>
                        <option value="90days">3 tháng qua</option>
                        <option value="365days" selected>1 năm qua</option>
                    </select>
                </div>
            </div>
            <div class="dashboard-cards">
                <div class="card">
                    <div class="card-header">
                        <h3>Tổng số phim</h3>
                        <div class="card-icon bg-primary">
                            <i class="fas fa-film"></i>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="card-stat">1,254</div>
                        <div class="card-trend up">
                            <i class="fas fa-arrow-up"></i> +12 phim mới trong tháng
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Người dùng</h3>
                        <div class="card-icon bg-success">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="card-stat">5,678</div>
                        <div class="card-trend up">
                            <i class="fas fa-arrow-up"></i> +45 người dùng mới
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Lượt xem</h3>
                        <div class="card-icon bg-danger">
                            <i class="fas fa-eye"></i>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="card-stat">245,678</div>
                        <div class="card-trend up">
                            <i class="fas fa-arrow-up"></i> +12,345 lượt xem
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-section">
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Thống kê lượt xem phim</h3>
                        <div class="chart-actions">
                            <select>
                                <option>7 ngày qua</option>
                                <option>30 ngày qua</option>
                                <option>3 tháng qua</option>
                                <option selected>1 năm qua</option>
                            </select>
                        </div>
                    </div>
                    <canvas id="viewsChart"></canvas>
                </div>
                
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Phân loại thể loại</h3>
                    </div>
                    <canvas id="genresChart"></canvas>
                </div>
            </div>

            <!-- Recent Movies Table -->
            <div class="table-container">
                <div class="table-header">
                    <h2>Phim mới cập nhật</h2>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Poster</th>
                            <th>Tên phim</th>
                            <th>Thể loại</th>
                            <th>Năm</th>
                            <th>Đánh giá</th>
                            <th>Lượt xem</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><img src="https://via.placeholder.com/45x65/3f51b5/ffffff?text=AE" class="movie-poster" alt="Avengers: Endgame"></td>
                            <td>Avengers: Endgame</td>
                            <td>Hành động, Phiêu lưu</td>
                            <td>2019</td>
                            <td>9.2/10</td>
                            <td>45,678</td>
                        </tr>
                        <tr>
                            <td><img src="https://via.placeholder.com/45x65/f44336/ffffff?text=SM" class="movie-poster" alt="Spider-Man"></td>
                            <td>Spider-Man: No Way Home</td>
                            <td>Hành động, Khoa học viễn tưởng</td>
                            <td>2021</td>
                            <td>9.1/10</td>
                            <td>38,942</td>
                        </tr>
                        <tr>
                            <td><img src="https://via.placeholder.com/45x65/455a64/ffffff?text=TB" class="movie-poster" alt="The Batman"></td>
                            <td>The Batman</td>
                            <td>Hành động, Tội phạm</td>
                            <td>2022</td>
                            <td>8.8/10</td>
                            <td>32,156</td>
                        </tr>
                        <tr>
                            <td><img src="https://via.placeholder.com/45x65/ff9800/ffffff?text=D2" class="movie-poster" alt="Dune"></td>
                            <td>Dune: Part Two</td>
                            <td>Khoa học viễn tưởng, Phiêu lưu</td>
                            <td>2024</td>
                            <td>9.0/10</td>
                            <td>28,743</td>
                        </tr>
                        <tr>
                            <td><img src="https://via.placeholder.com/45x65/4caf50/ffffff?text=OP" class="movie-poster" alt="Oppenheimer"></td>
                            <td>Oppenheimer</td>
                            <td>Tiểu sử, Lịch sử</td>
                            <td>2023</td>
                            <td>8.9/10</td>
                            <td>25,891</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Recent Users Table -->
            <div class="table-container">
                <div class="table-header">
                    <h2>Người dùng mới</h2>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Họ tên</th>
                            <th>Email</th>
                            <th>Ngày tham gia</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>#5678</td>
                            <td>Nguyễn Văn A</td>
                            <td>nguyenvana@example.com</td>
                            <td>15/05/2023</td>
                        </tr>
                        <tr>
                            <td>#5677</td>
                            <td>Trần Thị B</td>
                            <td>tranthib@example.com</td>
                            <td>14/05/2023</td>
                        </tr>
                        <tr>
                            <td>#5676</td>
                            <td>Lê Văn C</td>
                            <td>levanc@example.com</td>
                            <td>13/05/2023</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>© 2023 Hệ thống Quản trị Phim. Phiên bản 2.0.1</p>
        </div>
    </div>

    <script>
        // Xử lý sự kiện cho sidebar
        document.querySelectorAll('.sidebar-menu a').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.sidebar-menu a').forEach(link => {
                    link.classList.remove('active');
                });
                this.classList.add('active');
            });
        });

        // Xử lý sự kiện thay đổi bộ lọc thời gian
        document.getElementById('timeFilter').addEventListener('change', function() {
            const filterValue = this.value;
            // Cập nhật dữ liệu thống kê dựa trên bộ lọc thời gian
            console.log('Bộ lọc thời gian:', filterValue);
            // TODO: Thêm logic để cập nhật dữ liệu card dựa trên filterValue
        });

        // Khởi tạo biểu đồ lượt xem
        const viewsCtx = document.getElementById('viewsChart').getContext('2d');
        const viewsChart = new Chart(viewsCtx, {
            type: 'line',
            data: {
                labels: ['Th1', 'Th2', 'Th3', 'Th4', 'Th5', 'Th6', 'Th7', 'Th8', 'Th9', 'Th10', 'Th11', 'Th12'],
                datasets: [{
                    label: 'Lượt xem (nghìn)',
                    data: [65, 78, 66, 74, 58, 82, 95, 112, 98, 120, 135, 150],
                    borderColor: '#3f51b5',
                    backgroundColor: 'rgba(63, 81, 181, 0.1)',
                    borderWidth: 2,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // Khởi tạo biểu đồ thể loại
        const genresCtx = document.getElementById('genresChart').getContext('2d');
        const genresChart = new Chart(genresCtx, {
            type: 'doughnut',
            data: {
                labels: ['Hành động', 'Lãng mạn', 'Hài', 'Kinh dị', 'Khoa học viễn tưởng', 'Tài liệu'],
                datasets: [{
                    data: [25, 15, 20, 10, 18, 12],
                    backgroundColor: [
                        '#3f51b5',
                        '#f44336',
                        '#ff9800',
                        '#455a64',
                        '#4caf50',
                        '#2196f3'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });

        // Hiệu ứng hover cho các card
        document.querySelectorAll('.card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
    </script>
</body>
</html>